<div class="cards-container">

    <h2>Lista de encuestas
        <span style="float:right;">
            <p-chip label="Activas" [style]="{'background-color': 'var(--color-light)', 'color': 'white', 'font-size':'1rem'}"/>
            <p-chip label="Enviadas" [style]="{'background-color': 'var(--p-gray-200)', 'color': 'var(--color-light)', 'font-size':'1rem'}"/>
        </span>
    </h2>
    <div class="dashboard-list">
        <div *ngIf="loading" class="loading-message">
            <i class="pi pi-spin pi-cog" style="font-size: 2rem"></i>
            <p>Cargando datos del dashboard...</p>
          </div>
          <div *ngIf="error" class="error-message">
            <i class="pi pi-exclamation-triangle" style="font-size: 2rem"></i>
            <p>{{ error }}</p>
            <button pButton pRipple 
                    icon="pi pi-refresh" 
                    label="Reintentar" 
                    (click)="cargarEncuestas()"
                    [style]="{ backgroundColor: 'var(--color-light)' }">
            </button>
          </div>
<ng-container *ngIf="encuestas.length > 0; else noEncuestas">
  <p-card *ngFor="let encuesta of encuestas" class="dashboard-card" [ngStyle]="{'background-color': encuesta.esActivo ? 'var(--color-light)' : 'var(--p-gray-200)'}">
    <ng-template #title>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="display: flex; align-items: center; gap: 1rem;">
                <i class="pi pi-receipt" style="font-size: 2rem;color: var(--color-primary)"></i>
                <h5>{{ encuesta.nombre }}</h5>                
            </span>
            <span style="font-size: 1rem; color: var(--color-primary);"> 
                <i class="pi pi-pencil" 
                    style="font-size: 1.4rem; margin-right: 1rem;"
                    pTooltip="Editar encuesta" 
                    tooltipPosition="top" 
                    (click)="editarEncuesta(encuesta)"
                    placeholder="Right">
                    </i>
                <i class="pi pi-trash" 
                    style="font-size: 1.4rem;
                     margin-right: 1rem;"
                     pTooltip="Eliminar encuesta" 
                     (click)="eliminarEncuesta(encuesta)"
                     tooltipPosition="top" 
                     placeholder="Right">
                </i>
            </span>
        </div>
    </ng-template>    
  </p-card>
</ng-container>

<ng-template #noEncuestas>
  <div class="p-message p-message-info no-encuesta">
    <i class="pi pi-info-circle"></i>
    <span class="p-message-text">{{ error }}</span>
  </div>
</ng-template>
</div>

